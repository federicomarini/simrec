<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>simrec: An R-Package for Simulation of Recurrent Event Data • simrec</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="simrec: An R-Package for Simulation of Recurrent Event Data">
<meta property="og:description" content="simrec">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simrec</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/simrec-vignette.html">simrec: An R-Package for Simulation of Recurrent Event Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/federicomarini/simrec/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><link href="simrec-vignette_files/htmltools-fill-0.5.8/fill.css" rel="stylesheet">
<script src="simrec-vignette_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="simrec-vignette_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="simrec-vignette_files/datatables-binding-0.32/datatables.js"></script><link href="simrec-vignette_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="simrec-vignette_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="simrec-vignette_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="simrec-vignette_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="simrec-vignette_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>simrec: An R-Package for Simulation of Recurrent
Event Data</h1>
                        <h4 data-toc-skip class="author">Katharina
Ingel<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</h4>
            <address class="author_afil">
      Institute of Medical Biostatistics, Epidemiology and Informatics
(<a href="https://www.unimedizin-mainz.de/imbei/imbei/welcome-page.html?L=1" class="external-link">IMBEI,
Mainz</a>)<br><h4 data-toc-skip class="author">Stella
Preussler<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
</h4>
            <address class="author_afil">
      Institute of Medical Biostatistics, Epidemiology and Informatics
(<a href="https://www.unimedizin-mainz.de/imbei/imbei/welcome-page.html?L=1" class="external-link">IMBEI,
Mainz</a>)<br><h4 data-toc-skip class="author">Federico
Marini<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</h4>
            <address class="author_afil">
      Institute of Medical Biostatistics, Epidemiology and Informatics
(<a href="https://www.unimedizin-mainz.de/imbei/imbei/welcome-page.html?L=1" class="external-link">IMBEI,
Mainz</a>)<br><h4 data-toc-skip class="author">Antje
Jahn-Eimermacher<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>
</h4>
            <address class="author_afil">
      Institute of Medical Biostatistics, Epidemiology and Informatics
(<a href="https://www.unimedizin-mainz.de/imbei/imbei/welcome-page.html?L=1" class="external-link">IMBEI,
Mainz</a>)<br><h4 data-toc-skip class="date">2024-03-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/federicomarini/simrec/blob/HEAD/vignettes/simrec-vignette.Rmd" class="external-link"><code>vignettes/simrec-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>simrec-vignette.Rmd</code></div>

    </address>
</address>
</address>
</address>
</div>

    
    
<div class="section level2">
<h2 class="unnumbered" id="abstract">Abstract<a class="anchor" aria-label="anchor" href="#abstract"></a>
</h2>
<p><code>simrec</code> allows simulation of recurrent event data
following the multiplicative intensity model described in <span class="citation">(Andersen and Gill 1982)</span> with the baseline
hazard being a function of the total/calendar time. To induce
between-subject-heterogeneity a random effect covariate (frailty term)
can be incorporated. Furthermore, via <code>simreccomp</code> simulation
of data following a multistate model with recurrent event data of one
type and a competing event is possible. <code>simrecint</code> gives the
possibility to additionally simulate a recruitment time for each
individual and cut the data to an interim data set. With
<code>simrecPlot</code> and <code>simreccompPlot</code> the data can be
plotted.</p>
<p><strong>Keywords</strong>: recurrent event data, competing event,
frailty, simulation, total-time model</p>
<!-- \usepackage{amsmath, amssymb} -->
<!-- \usepackage{tikz} -->
<!-- %% Note that you should use the \pkg{}, \proglang{} and \code{} commands. -->
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<!-- {#sec:intro} -->
<p>The <code>simrec</code> package includes the functions
<code>simrec</code>, <code>simreccomp</code> and <code>simrecint</code>
and allows simulation of recurrent event data. To induce
between-subject-heterogeneity a random effect covariate (frailty term)
can be incorporated. Via <code>simreccomp</code> time-to-event data that
follow a multistate model with recurrent event data of one type and a
competing event can be simulated. Data output is in the counting-process
format. <code>simrecint</code> gives the possibility to additionally
simulate a recruitment time for each individual and cut the data to an
interim data set. With <code>simrecPlot</code> and
<code>simreccompPlot</code> the data can be plotted.</p>
</div>
<div class="section level2">
<h2 id="the-simrec-function">The <code>simrec</code> function<a class="anchor" aria-label="anchor" href="#the-simrec-function"></a>
</h2>
<div class="section level3">
<h3 class="unnumbered" id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h3>
<p>The function <code>simrec</code> allows simulation of recurrent event
data following the multiplicative intensity model described in Andersen
and Gill <span class="citation">(Andersen and Gill 1982)</span> with the
baseline hazard being a function of the total/calendar time. To induce
between-subject-heterogeneity a random effect covariate (frailty term)
can be incorporated. Data for individual <span class="math inline">\(i\)</span> are generated according to the
intensity process <span class="math display">\[Y_i(t)\cdot
\lambda_0(t)\cdot Z_i \cdot \exp(\beta^t X_i)\]</span> where <span class="math inline">\(X_i\)</span> defines the covariate vector, and
<span class="math inline">\(\beta\)</span> the regression coefficient
vector. <span class="math inline">\(\lambda_0(t)\)</span> denotes the
baseline hazard, being a function of the total/calendar time <span class="math inline">\(t\)</span>, and <span class="math inline">\(Y_i(t)\)</span> the predictable process that
equals one as long as individual <span class="math inline">\(i\)</span>
is under observation and at risk for experiencing events. <span class="math inline">\(Z_i\)</span> denotes the frailty variable with
<span class="math inline">\((Z_i)_i\)</span> iid with <span class="math inline">\(E(Z_i)=1\)</span> and <span class="math inline">\(Var(Z_i)=\theta\)</span>. The parameter <span class="math inline">\(\theta\)</span> describes the degree of
between-subject-heterogeneity. Data output is in the counting process
format.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simrec.html">simrec</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">fu.min</span>, <span class="va">fu.max</span>, cens.prob <span class="op">=</span> <span class="fl">0</span>, dist.x <span class="op">=</span> <span class="st">"binomial"</span>, par.x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  beta.x <span class="op">=</span> <span class="fl">0</span>, dist.z <span class="op">=</span> <span class="st">"gamma"</span>, par.z <span class="op">=</span> <span class="fl">0</span>, <span class="va">dist.rec</span>, <span class="va">par.rec</span>, pfree <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dfree <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 class="unnumbered" id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h3>
<ul>
<li><p><code>N</code> Number of individuals</p></li>
<li><p><code>fu.min</code> Minimum length of follow-up.</p></li>
<li><p><code>fu.max</code> Maximum length of follow-up. Individuals
length of follow-up is generated from a uniform distribution on
<code>[fu.min, fu.max]</code>. If <code>fu.min=fu.max</code>, then all
individuals have a common follow-up.</p></li>
<li><p><code>cens.prob</code> Gives the probability of being censored
due to loss to follow-up before <code>fu.max</code>. For a random set of
individuals defined by a B(N,<code>cens.prob</code>)-distribution, the
time to censoring is generated from a uniform distribution on
<code>[0, fu.max]</code>. Default is <code>cens.prob=0</code>, i.e. no
censoring due to loss to follow-up.</p></li>
<li><p><code>dist.x</code> Distribution of the covariate(s) <span class="math inline">\(X\)</span>. If there is more than one covariate,
<code>dist.x</code> must be a vector of distributions with one entry for
each covariate. Possible values are <code>"binomial"</code> and
<code>"normal"</code>, default is <code>"binomial"</code>.</p></li>
<li><p><code>par.x</code> Parameters of the covariate distribution(s).
For <code>"binomial"</code>, <code>par.x</code> is the probability for
<span class="math inline">\(x=1\)</span>. For <code>"normal"</code>,
<code>par.x</code> is the vector of (<span class="math inline">\(\mu,
\sigma\)</span>)} where <span class="math inline">\(\mu\)</span> is the
mean and <span class="math inline">\(\sigma\)</span> is the standard
deviation of a normal distribution. If one of the covariates is defined
to be normally distributed, <code>par.x</code> must be a list,
e.g. <code>dist.x &lt;- c("binomial", "normal")</code> and
<code>par.x  &lt;- list(0.5, c(1,2))</code>. Default is
<code>par.x = 0</code>, i.e. <span class="math inline">\(x=0\)</span>
for all individuals.</p></li>
<li><p><code>beta.x</code> Regression coefficient(s) for the
covariate(s) <span class="math inline">\(x\)</span>. If there is more
than one covariate, <code>beta.x</code> must be a vector of coefficients
with one entry for each covariate. <code>simrec</code> generates as many
covariates as there are entries in <code>beta.x</code>. Default is
<code>beta.x = 0</code>, corresponding to no effect of the covariate
<span class="math inline">\(x\)</span>.</p></li>
<li><p><code>dist.z</code> Distribution of the frailty variable <span class="math inline">\(Z\)</span> with <span class="math inline">\(E(Z)=1\)</span> and <span class="math inline">\(Var(Z)=\theta\)</span>. Possible values are
<code>"gamma"</code> for a Gamma distributed frailty and
<code>"lognormal"</code> for a lognormal distributed frailty. Default is
<code>dist.z="gamma"</code>.</p></li>
<li><p><code>par.z</code> Parameter <span class="math inline">\(\theta\)</span> for the frailty distribution: this
parameter gives the variance of the frailty variable <span class="math inline">\(Z\)</span>. Default is <code>par.z=0</code>, which
causes <span class="math inline">\(Z\equiv 1\)</span>, i.e. no frailty
effect.</p></li>
<li><p><code>dist.rec</code> Form of the baseline hazard function.
Possible values are <code>"weibull"</code> or <code>"gompertz"</code> or
<code>"lognormal"</code> or <code>"step"</code>.</p></li>
<li><p><code>par.rec</code> Parameters for the distribution of the event
data. <br> If <code>dist.rec="weibull"</code> the hazard function is
<span class="math display">\[\lambda_0(t)=\lambda\cdot\nu\cdot t^{\nu -
1}\]</span> where <span class="math inline">\(\lambda&gt;0\)</span> is
the scale and <span class="math inline">\(\nu&gt;0\)</span> is the shape
parameter. Then <code>par.rec=c(lambda, nu)</code>. A special case of
this is the exponential distribution for <span class="math inline">\(\nu=1\)</span>.\ If
<code>dist.rec="gompertz"</code>, the hazard function is <span class="math display">\[\lambda_0(t)=\lambda\cdot \exp(\alpha t)\]</span>
where <span class="math inline">\(\lambda&gt;0\)</span> is the scale and
<span class="math inline">\(\alpha\in(-\infty,+\infty)\)</span> is the
shape parameter. Then <code>par.rec=c(lambda, alpha)</code>. <br> If
<code>dist.rec="lognormal"</code>, the hazard function is <span class="math display">\[\lambda_0(t) = \frac{1}{\sigma t} \cdot
\frac{\phi(\frac{ln(t)-\mu}{\sigma})}{\Phi(\frac{-ln(t)-\mu}{\sigma})}\]</span>
where <span class="math inline">\(\phi\)</span> is the probability
density function and <span class="math inline">\(\Phi\)</span> is the
cumulative distribution function of the standard normal distribution,
<span class="math inline">\(\mu\in(-\infty,+\infty)\)</span> is a
location parameter and <span class="math inline">\(\sigma&gt;0\)</span>
is a shape parameter. Then <code>par.rec=c(mu,sigma)</code>. Please note
that specifying <code>dist.rec="lognormal"</code> together with some
covariates does not specify the usual lognormal model (with covariates
specified as effects on the parameters of the lognormal distribution
resulting in non-proportional hazards), but only defines the baseline
hazard and incorporates covariate effects using the proportional hazard
assumption. <br> If <code>dist.rec="step"</code> the hazard function is
<span class="math display">\[\lambda_0(t)=\begin{cases} a, &amp; t\leq
t_1\cr b, &amp; t&gt;t_1\end{cases}\]</span> Then
<code>par.rec=c(a,b,t_1)</code>, with <span class="math inline">\(a,b\geq 0\)</span>.</p></li>
<li><p><code>pfree</code> Probability that after experiencing an event
the individual is not at risk for experiencing further events for a
length of <code>dfree</code> time units. Default is
<code>pfree = 0</code>.</p></li>
<li><p><code>dfree</code> Length of the risk-free interval. Must be in
the same time unit as <code>fu.max</code>. Default is
<code>dfree = 0</code>, i.e. the individual is continously at risk for
experiencing events until end of follow-up.</p></li>
</ul>
</div>
<div class="section level3">
<h3 class="unnumbered" id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h3>
<p>The output is a <code>data.frame</code> consisting of the
columns:</p>
<ul>
<li>
<code>id</code> An integer number for identification of each
individual</li>
<li>
<code>x</code> or <code>x.V1, x.V2, ...</code> - depending on the
covariate matrix. Contains the randomly generated value of the
covariate(s) <span class="math inline">\(X\)</span> for each
individual.</li>
<li>
<code>z</code> Contains the randomly generated value of the frailty
variable <span class="math inline">\(Z\)</span> for each
individual.</li>
<li>
<code>start</code> The start of interval <code>[start, stop]</code>,
when the individual starts to be at risk for a next event.</li>
<li>
<code>stop</code> The time of an event or censoring, i.e. the end of
interval <code>[start, stop]</code>.</li>
<li>
<code>status</code> An indicator of whether an event occured at time
<code>stop</code> (<code>status=1</code>) or the individual is censored
at time <code>stop</code> (<code>status=0</code>).</li>
<li>
<code>fu</code> Length of follow-up period <code>[0,fu]</code> for
each individual.</li>
</ul>
<p>For each individual there are as many lines as it experiences events,
plus one line if being censored. The data format corresponds to the
counting process format.</p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a>
</h3>
<p>Data are simulated by extending the methods proposed by Bender <span class="citation">(Bender, Augustin, and Blettner 2005)</span> to the
multiplicative intensity model. You can read more on this in our work
<span class="citation">(Jahn-Eimermacher et al. 2015)</span>.</p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/federicomarini/simrec" class="external-link">simrec</a></span><span class="op">)</span></span>
<span><span class="co">### Example:</span></span>
<span><span class="co">### A sample of 10 individuals</span></span>
<span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="co">### with a binomially distributed covariate with a regression coefficient</span></span>
<span><span class="co">### of beta=0.3, and a standard normally distributed covariate with a</span></span>
<span><span class="co">### regression coefficient of beta=0.2,</span></span>
<span></span>
<span><span class="va">dist.x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binomial"</span>, <span class="st">"normal"</span><span class="op">)</span></span>
<span><span class="va">par.x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">beta.x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### a gamma distributed frailty variable with variance 0.25</span></span>
<span></span>
<span><span class="va">dist.z</span> <span class="op">&lt;-</span> <span class="st">"gamma"</span></span>
<span><span class="va">par.z</span> <span class="op">&lt;-</span> <span class="fl">0.25</span></span>
<span></span>
<span><span class="co">### and a Weibull-shaped baseline hazard with shape parameter lambda=1</span></span>
<span><span class="co">### and scale parameter nu=2.</span></span>
<span></span>
<span><span class="va">dist.rec</span> <span class="op">&lt;-</span> <span class="st">"weibull"</span></span>
<span><span class="va">par.rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Subjects are to be followed for two years with 20\% of the subjects</span></span>
<span><span class="co">### being censored according to a uniformly distributed censoring time</span></span>
<span><span class="co">### within [0,2] (in years).</span></span>
<span></span>
<span><span class="va">fu.min</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">fu.max</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">cens.prob</span> <span class="op">&lt;-</span> <span class="fl">0.2</span></span>
<span></span>
<span><span class="co">### After each event a subject is not at risk for experiencing further events</span></span>
<span><span class="co">### for a period of 30 days with a probability of 50\%.</span></span>
<span></span>
<span><span class="va">dfree</span> <span class="op">&lt;-</span> <span class="fl">30</span><span class="op">/</span><span class="fl">365</span></span>
<span><span class="va">pfree</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span></span>
<span><span class="va">simdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simrec.html">simrec</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">fu.min</span>, <span class="va">fu.max</span>, <span class="va">cens.prob</span>, <span class="va">dist.x</span>, <span class="va">par.x</span>, <span class="va">beta.x</span>,</span>
<span>                  <span class="va">dist.z</span>, <span class="va">par.z</span>, <span class="va">dist.rec</span>, <span class="va">par.rec</span>, <span class="va">pfree</span>, <span class="va">dfree</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">simdata</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">simdata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    id x.V1       x.V2         z    start      stop status fu</span></span>
<span><span class="co">## 1   1    1 -0.8392555 1.4873702 0.000000 1.1417952      1  2</span></span>
<span><span class="co">## 2   1    1 -0.8392555 1.4873702 1.223987 1.4802834      1  2</span></span>
<span><span class="co">## 3   1    1 -0.8392555 1.4873702 1.480283 1.4887188      1  2</span></span>
<span><span class="co">## 4   1    1 -0.8392555 1.4873702 1.570911 1.7404193      1  2</span></span>
<span><span class="co">## 5   1    1 -0.8392555 1.4873702 1.740419 1.7511493      1  2</span></span>
<span><span class="co">## 6   1    1 -0.8392555 1.4873702 1.833341 2.0000000      0  2</span></span>
<span><span class="co">## 7   2    1 -1.9152142 0.8812671 0.000000 1.4127861      1  2</span></span>
<span><span class="co">## 8   2    1 -1.9152142 0.8812671 1.494978 1.5076667      1  2</span></span>
<span><span class="co">## 9   2    1 -1.9152142 0.8812671 1.589858 2.0000000      0  2</span></span>
<span><span class="co">## 10  3    0  0.2799938 1.8491645 0.000000 0.4834365      1  2</span></span></code></pre>
<div class="datatables html-widget html-fill-item" id="htmlwidget-775708a8d3f8d7b400c6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-775708a8d3f8d7b400c6">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","19","20","21","22","23","24","25","26","27","28","29","31","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57"],[1,1,1,1,1,1,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,5,5,5,6,7,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10],[1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[-0.8392555495092139,-0.8392555495092139,-0.8392555495092139,-0.8392555495092139,-0.8392555495092139,-0.8392555495092139,-1.915214205356052,-1.915214205356052,-1.915214205356052,0.2799938189683887,0.2799938189683887,0.2799938189683887,0.2799938189683887,0.2799938189683887,0.2799938189683887,0.2799938189683887,0.2799938189683887,-0.5359369948853915,-0.5359369948853915,-0.5359369948853915,-0.5359369948853915,-0.5359369948853915,-0.5359369948853915,-0.5359369948853915,1.161172767532931,1.161172767532931,1.161172767532931,-1.112406347613011,-1.619969979831989,1.057126910118255,1.057126910118255,1.057126910118255,1.057126910118255,1.057126910118255,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.9889876490750151,0.4012237219068992,0.4012237219068992,0.4012237219068992,0.4012237219068992,0.4012237219068992,0.4012237219068992,0.4012237219068992,0.4012237219068992],[1.487370183321621,1.487370183321621,1.487370183321621,1.487370183321621,1.487370183321621,1.487370183321621,0.8812671126669765,0.8812671126669765,0.8812671126669765,1.849164507229795,1.849164507229795,1.849164507229795,1.849164507229795,1.849164507229795,1.849164507229795,1.849164507229795,1.849164507229795,0.861041334783527,0.861041334783527,0.861041334783527,0.861041334783527,0.861041334783527,0.861041334783527,0.861041334783527,1.220127140849558,1.220127140849558,1.220127140849558,0.2898088459034691,0.2401819103529805,0.4399163930920058,0.4399163930920058,0.4399163930920058,0.4399163930920058,0.4399163930920058,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.764020840670596,1.693082297310726,1.693082297310726,1.693082297310726,1.693082297310726,1.693082297310726,1.693082297310726,1.693082297310726,1.693082297310726],[0,1.223986994562377,1.480283440263065,1.570910545643907,1.740419279532027,1.833341036149899,0,1.494977857545185,1.589858480533821,0,0.5656282746771291,0.7724158244693896,0.8471088934018222,1.306741851029495,1.502748014589604,1.63442776435136,1.915099132859111,0,0.4236586914261984,1.061051420745745,1.287656821405791,1.374234600559658,1.579411873015328,1.78124086372639,0,1.427934091925044,1.914405572394334,0,0,0,0.8630138950108467,0.953558599714646,1.152858275174069,1.235520217185419,0,0.6185993019486059,0.698168568747313,0.9304181821230656,0.9846605907618059,1.238876872936952,1.445259460697173,1.450161025836571,1.491456886481251,1.656028095185207,1.709204141742471,1.802609845628224,0,0.8903000385821142,1.046816089692614,1.14619966783574,1.605477803123399,1.680391540429571,1.754893863915408,1.799104329403756],[1.141795213740459,1.480283440263065,1.488718764821989,1.740419279532027,1.751149255327981,2,1.412786076723267,1.507666699711903,2,0.4834364938552113,0.6902240436474718,0.8471088934018222,1.306741851029495,1.502748014589604,1.552235983529442,1.915099132859111,1.931993067862468,0.4236586914261984,1.061051420745745,1.287656821405791,1.29204281973774,1.49722009219341,1.699049082904472,2,1.345742311103126,1.914405572394334,2,0.6948532084934413,2,0.7808221141889289,0.953558599714646,1.070666494352151,1.153328436363501,2,0.5364075211266881,0.698168568747313,0.9304181821230656,0.9846605907618059,1.238876872936952,1.363067679875256,1.450161025836571,1.491456886481251,1.57383631436329,1.709204141742471,1.802609845628224,1.874156817793846,0.8081082577601963,0.9646243088706959,1.14619966783574,1.523286022301481,1.680391540429571,1.754893863915408,1.799104329403756,2],[1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0.6948532084934413,2,2,2,2,2,2,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,1.874156817793846,2,2,2,2,2,2,2,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>x.V1<\/th>\n      <th>x.V2<\/th>\n      <th>z<\/th>\n      <th>start<\/th>\n      <th>stop<\/th>\n      <th>status<\/th>\n      <th>fu<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"x.V1","targets":2},{"name":"x.V2","targets":3},{"name":"z","targets":4},{"name":"start","targets":5},{"name":"stop","targets":6},{"name":"status","targets":7},{"name":"fu","targets":8}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="the-simreccomp-function">The <code>simreccomp</code> function<a class="anchor" aria-label="anchor" href="#the-simreccomp-function"></a>
</h2>
<div class="section level3">
<h3 class="unnumbered" id="description-1">Description<a class="anchor" aria-label="anchor" href="#description-1"></a>
</h3>
<p>The function <code>simreccomp</code> allows simulation of
time-to-event-data that follow a multistate-model with recurrent events
of one type and a competing event. The baseline hazard for the
cause-specific hazards are here functions of the total/calendar time. To
induce between-subject-heterogeneity a random effect covariate (frailty
term) can be incorporated for the recurrent and the competing event.</p>
<p>Data for the recurrent events of the individual <span class="math inline">\(i\)</span> are generated according to the
cause-specific hazards <span class="math display">\[\lambda_{0r}(t)\cdot
Z_{ri} \cdot \exp(\beta_r^t X_i)\]</span> where <span class="math inline">\(X_i\)</span> defines the covariate vector and
<span class="math inline">\(\beta_r\)</span> the regression coefficient
vector. <span class="math inline">\(\lambda_{0r}(t)\)</span> denotes the
baseline hazard, being a function of the total/calendar time <span class="math inline">\(t\)</span> and <span class="math inline">\(Z_{ri}\)</span> denotes the frailty variables with
<span class="math inline">\((Z_{ri})_i\)</span> iid with <span class="math inline">\(E(Z_{ri})=1\)</span> and <span class="math inline">\(Var(Z_{ri})=\theta_r\)</span>. The parameter <span class="math inline">\(\theta_r\)</span> describes the degree of
between-subject-heterogeneity for the recurrent event. Analougously the
competing event is generated according to the cause-specific hazard
conditionally on the frailty variable and covariates: <span class="math display">\[\lambda_{0c}(t)\cdot Z_{ci} \cdot \exp(\beta_c^t
X_i)\]</span> Data output is in the counting process format.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simreccomp.html">simreccomp</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">fu.min</span>, <span class="va">fu.max</span>, cens.prob <span class="op">=</span> <span class="fl">0</span>, dist.x <span class="op">=</span> <span class="st">"binomial"</span>, par.x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>           beta.xr <span class="op">=</span> <span class="fl">0</span>, beta.xc <span class="op">=</span> <span class="fl">0</span>, dist.zr <span class="op">=</span> <span class="st">"gamma"</span>, par.zr <span class="op">=</span> <span class="fl">0</span>, a <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           dist.zc <span class="op">=</span> <span class="cn">NULL</span>, par.zc <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">dist.rec</span>, <span class="va">par.rec</span>,</span>
<span>           <span class="va">dist.comp</span>, <span class="va">par.comp</span>, pfree <span class="op">=</span> <span class="fl">0</span>, dfree <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 class="unnumbered" id="parameters-1">Parameters<a class="anchor" aria-label="anchor" href="#parameters-1"></a>
</h3>
<ul>
<li><p><code>N</code> Number of individuals</p></li>
<li><p><code>fu.min</code> Minimum length of follow-up.</p></li>
<li><p><code>fu.max</code> Maximum length of follow-up. Individuals
length of follow-up is generated from a uniform distribution on
<code>[fu.min, fu.max]</code>. If <code>fu.min=fu.max</code>, then all
individuals have a common follow-up.</p></li>
<li><p><code>cens.prob</code> Gives the probability of being censored
due to loss to follow-up before <code>fu.max</code>. For a random set of
individuals defined by a B(N,<code>cens.prob</code>)-distribution, the
time to censoring is generated from a uniform distribution on
<code>[0, fu.max]</code>. Default is <code>cens.prob=0</code>, i.e. no
censoring due to loss to follow-up.</p></li>
<li><p><code>dist.x</code> Distribution of the covariate(s) <span class="math inline">\(X\)</span>. If there is more than one covariate,
<code>dist.x</code> must be a vector of distributions with one entry for
each covariate. Possible values are <code>"binomial"</code> and
<code>"normal"</code>, default is <code>"binomial"</code>.</p></li>
<li><p><code>par.x</code> Parameters of the covariate distribution(s).
For <code>"binomial"</code>, <code>par.x</code> is the probability for
<span class="math inline">\(x=1\)</span>. For <code>"normal"</code>,
<code>par.x</code> is the vector of (<span class="math inline">\(\mu,
\sigma\)</span>)} where <span class="math inline">\(\mu\)</span> is the
mean and <span class="math inline">\(\sigma\)</span> is the standard
deviation of a normal distribution. If one of the covariates is defined
to be normally distributed, <code>par.x</code> must be a list,
e.g. <code>dist.x &lt;- c("binomial", "normal")</code> and
<code>par.x  &lt;- list(0.5, c(1,2))</code>. Default is
<code>par.x = 0</code>, i.e. <span class="math inline">\(x=0\)</span>
for all individuals.</p></li>
<li><p><code>beta.xr</code> Regression coefficient(s) for the
covariate(s) <span class="math inline">\(x\)</span> corresponding to the
recurrent events. If there is more than one covariate,
<code>beta.xr</code> must be a vector of coefficients with one entry for
each covariate. <code>simreccomp</code> generates as many covariates as
there are entries in <code>beta.xr</code>. Default is
<code>beta.xr = 0</code>, corresponding to no effect of the covariate
<span class="math inline">\(x\)</span> on the recurrent events.</p></li>
<li><p><code>beta.xc</code> Regression coefficient(s) for the
covariate(s) <span class="math inline">\(x\)</span> corresponding to the
competing event. If there is more than one covariate,
<code>beta.xc</code> must be a vector of coefficients with one entry for
each covariate. <code>simreccomp</code> generates as many covariates as
there are entries in <code>beta.xc</code>. Default is
<code>beta.xc = 0</code>, corresponding to no effect of the covariate
<span class="math inline">\(x\)</span> on the competing event.</p></li>
<li><p><code>dist.zr</code> Distribution of the frailty variable <span class="math inline">\(Z_r\)</span> for the recurrent events with <span class="math inline">\(E(Z_r)=1\)</span> and <span class="math inline">\(Var(Z_r)=\theta_r\)</span>. Possible values are
<code>"gamma"</code> for a Gamma distributed frailty and
<code>"lognormal"</code> for a lognormal distributed frailty. Default is
<code>dist.zr="gamma"</code>.</p></li>
<li><p><code>par.zr</code> Parameter <span class="math inline">\(\theta_r\)</span> for the frailty distribution:
this parameter gives the variance of the frailty variable <span class="math inline">\(Z_r\)</span>. Default is <code>par.zr=0</code>,
which causes <span class="math inline">\(Z\equiv 1\)</span>, i.e. no
frailty effect for the recurrent events.</p></li>
<li><p><code>dist.zc</code> Distribution of the frailty variable <span class="math inline">\(Z_c\)</span> for the competing event with <span class="math inline">\(E(Z_c)=1\)</span> and <span class="math inline">\(Var(Z_c)=\theta_r\)</span>. Possible values are
<code>"gamma"</code> for a Gamma distributed frailty and
<code>"lognormal"</code> for a lognormal distributed frailty.</p></li>
<li><p><code>par.zc</code> Parameter <span class="math inline">\(\theta_c\)</span> for the frailty distribution:
this parameter gives the variance of the frailty variable <span class="math inline">\(Z_c\)</span>.</p></li>
<li><p><code>a</code> Alternatively, the frailty distribution for the
competing event can be computed through the distribution of the frailty
variable <span class="math inline">\(Z_r\)</span> by <span class="math inline">\(Z_c=Z_r^a\)</span>. Either <code>a</code> or
<code>dist.zc</code> and <code>par.zc</code> must be specified.</p></li>
<li><p><code>dist.rec</code> Form of the baseline hazard function for
the recurrent events. Possible values are <code>"weibull"</code> or
<code>"gompertz"</code> or <code>"lognormal"</code> or
<code>"step"</code>.</p></li>
<li><p><code>par.rec</code> Parameters for the distribution of the
recurrent event data. <br> If <code>dist.rec="weibull"</code> the hazard
function is <span class="math display">\[\lambda_0(t)=\lambda\cdot\nu\cdot t^{\nu -
1}\]</span> where <span class="math inline">\(\lambda&gt;0\)</span> is
the scale and <span class="math inline">\(\nu&gt;0\)</span> is the shape
parameter. Then <code>par.rec=c(lambda, nu)</code>. A special case of
this is the exponential distribution for <span class="math inline">\(\nu=1\)</span>.\ If
<code>dist.rec="gompertz"</code>, the hazard function is <span class="math display">\[\lambda_0(t)=\lambda\cdot \exp(\alpha t)\]</span>
where <span class="math inline">\(\lambda&gt;0\)</span> is the scale and
<span class="math inline">\(\alpha\in(-\infty,+\infty)\)</span> is the
shape parameter. Then <code>par.rec=c(lambda, alpha)</code>. <br> If
<code>dist.rec="lognormal"</code>, the hazard function is <span class="math display">\[\lambda_0(t) = \frac{1}{\sigma t} \cdot
\frac{\phi(\frac{ln(t)-\mu}{\sigma})}{\Phi(\frac{-ln(t)-\mu}{\sigma})}\]</span>
where <span class="math inline">\(\phi\)</span> is the probability
density function and <span class="math inline">\(\Phi\)</span> is the
cumulative distribution function of the standard normal distribution,
<span class="math inline">\(\mu\in(-\infty,+\infty)\)</span> is a
location parameter and <span class="math inline">\(\sigma&gt;0\)</span>
is a shape parameter. Then <code>par.rec=c(mu,sigma)</code>. Please note
that specifying <code>dist.rec="lognormal"</code> together with some
covariates does not specify the usual lognormal model (with covariates
specified as effects on the parameters of the lognormal distribution
resulting in non-proportional hazards), but only defines the baseline
hazard and incorporates covariate effects using the proportional hazard
assumption. <br> If <code>dist.rec="step"</code> the hazard function is
<span class="math display">\[\lambda_0(t)=\begin{cases} a, &amp; t\leq
t_1\cr b, &amp; t&gt;t_1\end{cases}\]</span> Then
<code>par.rec=c(a,b,t_1)</code>, with <span class="math inline">\(a,b\geq 0\)</span>.</p></li>
<li><p><code>dist.comp</code> Form of the baseline hazard function for
the competing event. Possible values are <code>"weibull"</code> or
<code>"gompertz"</code> or <code>"lognormal"</code> or
<code>"step"</code>.</p></li>
<li><p><code>par.comp</code> Parameters for the distribution of the
competing event data. For more details see
<code>par.rec</code>.</p></li>
<li><p><code>pfree</code> Probability that after experiencing an event
the individual is not at risk for experiencing further events for a
length of <code>dfree</code> time units. Default is
<code>pfree = 0</code>.</p></li>
<li><p><code>dfree</code> Length of the risk-free interval. Must be in
the same time unit as <code>fu.max</code>. Default is
<code>dfree = 0</code>, i.e. the individual is continously at risk for
experiencing events until end of follow-up.</p></li>
</ul>
</div>
<div class="section level3">
<h3 class="unnumbered" id="output-1">Output<a class="anchor" aria-label="anchor" href="#output-1"></a>
</h3>
<p>The output is a <code>data.frame</code> consisting of the
columns:</p>
<ul>
<li>
<code>id</code> An integer number for identification of each
individual</li>
<li>
<code>x</code> or <code>x.V1, x.V2, ...</code> - depending on the
covariate matrix. Contains the randomly generated value of the
covariate(s) <span class="math inline">\(X\)</span> for each
individual.</li>
<li>
<code>zr</code> Contains the randomly generated value of the frailty
variable <span class="math inline">\(Z_r\)</span> for each
individual.</li>
<li>
<code>zc</code> Contains the randomly generated value of the frailty
variable <span class="math inline">\(Z_c\)</span> for each
individual.</li>
<li>
<code>start</code> The start of interval <code>[start, stop]</code>,
when the individual starts to be at risk for a next event.</li>
<li>
<code>stop</code> The time of an event or censoring, i.e. the end of
interval <code>[start, stop]</code>.</li>
<li>
<code>status</code> An indicator of whether an event occured at time
<code>stop</code> (<code>status=1</code>) or the individual is censored
at time <code>stop</code> (<code>status=0</code>) or the competing event
occured at time <code>stop</code> (<code>status=2</code>).</li>
<li>
<code>fu</code> Length of follow-up period <code>[0,fu]</code> for
each individual.</li>
</ul>
<p>For each individual there are as many lines as it experiences events,
plus one line if being censored. The data format corresponds to the
counting process format.</p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="example-1">Example<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/federicomarini/simrec" class="external-link">simrec</a></span><span class="op">)</span></span>
<span><span class="co">### Example:</span></span>
<span><span class="co">### A sample of 10 individuals</span></span>
<span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="co">### with a binomially distributed covariate and a standard normally distributed</span></span>
<span><span class="co">### covariate with regression coefficients of beta.xr=0.3 and beta.xr=0.2,</span></span>
<span><span class="co">### respectively, for the recurrent events,</span></span>
<span><span class="co">### as well as regression coefficients of beta.xc=0.5 and beta.xc=0.25,</span></span>
<span><span class="co">### respectively, for the competing event.</span></span>
<span></span>
<span><span class="va">dist.x</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binomial"</span>, <span class="st">"normal"</span><span class="op">)</span></span>
<span><span class="va">par.x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">beta.xr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">beta.xc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.25</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### a gamma distributed frailty variable for the recurrent event with</span></span>
<span><span class="co">### variance 0.25 and for the competing event with variance 0.3,</span></span>
<span></span>
<span><span class="va">dist.zr</span> <span class="op">&lt;-</span> <span class="st">"gamma"</span></span>
<span><span class="va">par.zr</span> <span class="op">&lt;-</span> <span class="fl">0.25</span></span>
<span></span>
<span><span class="va">dist.zc</span> <span class="op">&lt;-</span> <span class="st">"gamma"</span></span>
<span><span class="va">par.zc</span> <span class="op">&lt;-</span> <span class="fl">0.3</span></span>
<span></span>
<span><span class="co">### alternatively the frailty variable for the competing event can be computed</span></span>
<span><span class="co">### via a:</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span></span>
<span><span class="co">### Furthermore a Weibull-shaped baseline hazard for the recurrent event with</span></span>
<span><span class="co">### shape parameter lambda=1 and scale parameter nu=2,</span></span>
<span></span>
<span><span class="va">dist.rec</span> <span class="op">&lt;-</span> <span class="st">"weibull"</span></span>
<span><span class="va">par.rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### and a Weibull-shaped baseline hazard for the competing event with</span></span>
<span><span class="co">### shape parameter lambda=1 and scale parameter nu=2</span></span>
<span></span>
<span><span class="va">dist.comp</span> <span class="op">&lt;-</span> <span class="st">"weibull"</span></span>
<span><span class="va">par.comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Subjects are to be followed for two years with 20% of the subjects</span></span>
<span><span class="co">### being censored according to a uniformly distributed censoring time</span></span>
<span><span class="co">### within [0,2] (in years).</span></span>
<span></span>
<span><span class="va">fu.min</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">fu.max</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">cens.prob</span> <span class="op">&lt;-</span> <span class="fl">0.2</span></span>
<span></span>
<span><span class="co">### After each event a subject is not at risk for experiencing further events</span></span>
<span><span class="co">### for a period of 30 days with a probability of 50%.</span></span>
<span></span>
<span><span class="va">dfree</span> <span class="op">&lt;-</span> <span class="fl">30</span><span class="op">/</span><span class="fl">365</span></span>
<span><span class="va">pfree</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span></span>
<span><span class="va">simdata1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simreccomp.html">simreccomp</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N</span>, fu.min <span class="op">=</span> <span class="va">fu.min</span>, fu.max <span class="op">=</span> <span class="va">fu.max</span>, cens.prob <span class="op">=</span> <span class="va">cens.prob</span>,</span>
<span>                       dist.x <span class="op">=</span> <span class="va">dist.x</span>, par.x <span class="op">=</span> <span class="va">par.x</span>, beta.xr <span class="op">=</span> <span class="va">beta.xr</span>,</span>
<span>                       beta.xc <span class="op">=</span> <span class="va">beta.xc</span>, dist.zr <span class="op">=</span> <span class="va">dist.zr</span>, par.zr <span class="op">=</span> <span class="va">par.zr</span>, a <span class="op">=</span> <span class="va">a</span>,</span>
<span>                       dist.rec <span class="op">=</span> <span class="va">dist.rec</span>, par.rec <span class="op">=</span> <span class="va">par.rec</span>, dist.comp <span class="op">=</span> <span class="va">dist.comp</span>,</span>
<span>                       par.comp <span class="op">=</span> <span class="va">par.comp</span>, pfree <span class="op">=</span> <span class="va">pfree</span>, dfree <span class="op">=</span> <span class="va">dfree</span><span class="op">)</span></span>
<span><span class="va">simdata2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simreccomp.html">simreccomp</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N</span>, fu.min <span class="op">=</span> <span class="va">fu.min</span>, fu.max <span class="op">=</span> <span class="va">fu.max</span>, cens.prob <span class="op">=</span> <span class="va">cens.prob</span>,</span>
<span>                       dist.x <span class="op">=</span> <span class="va">dist.x</span>, par.x <span class="op">=</span> <span class="va">par.x</span>, beta.xr <span class="op">=</span> <span class="va">beta.xr</span>,</span>
<span>                       beta.xc <span class="op">=</span> <span class="va">beta.xc</span>, dist.zr <span class="op">=</span> <span class="va">dist.zr</span>, par.zr <span class="op">=</span> <span class="va">par.zr</span>,</span>
<span>                       dist.zc <span class="op">=</span> <span class="va">dist.zc</span>, par.zc <span class="op">=</span> <span class="va">par.zc</span>, dist.rec <span class="op">=</span> <span class="va">dist.rec</span>,</span>
<span>                       par.rec <span class="op">=</span> <span class="va">par.rec</span>, dist.comp <span class="op">=</span> <span class="va">dist.comp</span>,</span>
<span>                       par.comp <span class="op">=</span> <span class="va">par.comp</span>, pfree <span class="op">=</span> <span class="va">pfree</span>, dfree <span class="op">=</span> <span class="va">dfree</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">simdata1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">simdata2</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">simdata1</span><span class="op">)</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">simdata2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    id x.V1       x.V2        zr        zc     start      stop status        fu</span></span>
<span><span class="co">## 1   1    1  0.6240873 1.3926319 1.1800983 0.0000000 0.1064657      2 0.1064657</span></span>
<span><span class="co">## 11  2    1 -0.7305463 0.4361697 0.6604314 0.0000000 0.3728265      1 0.8367651</span></span>
<span><span class="co">## 12  2    1 -0.7305463 0.4361697 0.6604314 0.4550183 0.7480452      1 0.8367651</span></span>
<span><span class="co">## 13  2    1 -0.7305463 0.4361697 0.6604314 0.7480452 0.8367651      2 0.8367651</span></span>
<span><span class="co">## 15  3    1 -0.3858169 1.0038110 1.0019037 0.0000000 0.7571926      2 0.7571926</span></span>
<span><span class="co">## 17  4    1 -2.1663868 1.1232864 1.0598521 0.0000000 1.0753121      1 1.4329615</span></span>
<span><span class="co">## 18  4    1 -2.1663868 1.1232864 1.0598521 1.1575038 1.4329615      2 1.4329615</span></span>
<span><span class="co">## 22  5    0 -2.4925775 1.2365632 1.1120086 0.0000000 1.3199654      2 1.3199654</span></span>
<span><span class="co">## 25  6    0  1.1977765 1.2725037 1.1280531 0.0000000 0.9495084      1 1.0643043</span></span>
<span><span class="co">## 26  6    0  1.1977765 1.2725037 1.1280531 0.9495084 1.0643043      2 1.0643043</span></span>
<span><span class="co">##    id x.V1       x.V2       zr        zc    start      stop status        fu</span></span>
<span><span class="co">## 1   1    0  0.0562430 1.489704 0.4316568 0.000000 1.1733455      1 1.8218789</span></span>
<span><span class="co">## 2   1    0  0.0562430 1.489704 0.4316568 1.173345 1.2115883      1 1.8218789</span></span>
<span><span class="co">## 3   1    0  0.0562430 1.489704 0.4316568 1.293780 1.4014247      1 1.8218789</span></span>
<span><span class="co">## 4   1    0  0.0562430 1.489704 0.4316568 1.401425 1.5443755      1 1.8218789</span></span>
<span><span class="co">## 5   1    0  0.0562430 1.489704 0.4316568 1.544376 1.5916248      1 1.8218789</span></span>
<span><span class="co">## 6   1    0  0.0562430 1.489704 0.4316568 1.673817 1.7665125      1 1.8218789</span></span>
<span><span class="co">## 7   1    0  0.0562430 1.489704 0.4316568 1.766513 1.7880798      1 1.8218789</span></span>
<span><span class="co">## 8   1    0  0.0562430 1.489704 0.4316568 1.788080 1.8218789      2 1.8218789</span></span>
<span><span class="co">## 11  2    0  1.4122403 1.194353 0.5372101 0.000000 1.1096256      2 1.1096256</span></span>
<span><span class="co">## 16  3    0 -0.6547928 2.087468 1.2559105 0.000000 0.3045616      2 0.3045616</span></span></code></pre>
<div class="datatables html-widget html-fill-item" id="htmlwidget-0cac3734b5e696f47ee3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0cac3734b5e696f47ee3">{"x":{"filter":"none","vertical":false,"data":[["1","11","12","13","15","17","18","22","25","26","31","32","33","34","35","37","45"],[1,2,2,2,3,4,4,5,6,6,7,7,7,8,8,9,10],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0.6240872539450147,-0.730546322393295,-0.730546322393295,-0.730546322393295,-0.3858168555309427,-2.166386814540579,-2.166386814540579,-2.492577502824443,1.197776481205249,1.197776481205249,-0.1520982021364475,-0.1520982021364475,-0.1520982021364475,-0.08057871998360012,-0.08057871998360012,1.713743960074817,-1.128598689335214],[1.392631929507313,0.4361696983715213,0.4361696983715213,0.4361696983715213,1.003810994071712,1.123286383265676,1.123286383265676,1.236563165918554,1.272503684868443,1.272503684868443,1.051890864325505,1.051890864325505,1.051890864325505,0.5995935003112146,0.5995935003112146,0.7811862303103236,0.8757338657165866],[1.180098271122924,0.6604314486542273,0.6604314486542273,0.6604314486542273,1.001903685027514,1.059852057254066,1.059852057254066,1.112008617735741,1.128053050555887,1.128053050555887,1.025617308904986,1.025617308904986,1.025617308904986,0.7743342303625835,0.7743342303625835,0.8838474021630225,0.9358065322044865],[0,0,0.4550183053515182,0.7480452139764018,0,0,1.157503848707124,0,0,0.9495084401066783,0,0.6323256839548981,0.9380386590067445,0,0.7385663039212327,0,0],[0.1064656542530186,0.3728265245296004,0.7480452139764018,0.8367651117791709,0.7571925591650772,1.075312067885207,1.432961507765327,1.319965402620781,0.9495084401066783,1.064304292281109,0.5501339031329803,0.8558468781848267,1.037386679046951,0.7385663039212327,1.02688507617325,0.6262411042430135,0.904393961969448],[2,1,1,2,2,1,2,2,1,2,1,1,2,1,2,2,2],[0.1064656542530186,0.8367651117791709,0.8367651117791709,0.8367651117791709,0.7571925591650772,1.432961507765327,1.432961507765327,1.319965402620781,1.064304292281109,1.064304292281109,1.037386679046951,1.037386679046951,1.037386679046951,1.02688507617325,1.02688507617325,0.6262411042430135,0.904393961969448]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>x.V1<\/th>\n      <th>x.V2<\/th>\n      <th>zr<\/th>\n      <th>zc<\/th>\n      <th>start<\/th>\n      <th>stop<\/th>\n      <th>status<\/th>\n      <th>fu<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"x.V1","targets":2},{"name":"x.V2","targets":3},{"name":"zr","targets":4},{"name":"zc","targets":5},{"name":"start","targets":6},{"name":"stop","targets":7},{"name":"status","targets":8},{"name":"fu","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="datatables html-widget html-fill-item" id="htmlwidget-f2ffd49286e18db2e094" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f2ffd49286e18db2e094">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","11","16","21","22","23","29","30","31","33","39","40","41","42","43","45"],[1,1,1,1,1,1,1,1,2,3,4,4,4,5,5,5,6,7,7,8,8,9,10],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0],[0.05624300066681774,0.05624300066681774,0.05624300066681774,0.05624300066681774,0.05624300066681774,0.05624300066681774,0.05624300066681774,0.05624300066681774,1.412240304072051,-0.6547927584081196,-0.2366754594028278,-0.2366754594028278,-0.2366754594028278,0.634205334972589,0.634205334972589,0.634205334972589,-1.03998009199111,2.380425642113762,2.380425642113762,-0.9211374043708702,-0.9211374043708702,-0.2068128457975901,-1.635528488361338],[1.489703896106807,1.489703896106807,1.489703896106807,1.489703896106807,1.489703896106807,1.489703896106807,1.489703896106807,1.489703896106807,1.194352853460413,2.087468058092695,1.925874503078391,1.925874503078391,1.925874503078391,0.5555862788155906,0.5555862788155906,0.5555862788155906,1.371035592020904,0.4711463688705206,0.4711463688705206,0.5529032663353451,0.5529032663353451,1.296441327908043,1.126560779537311],[0.431656799504857,0.431656799504857,0.431656799504857,0.431656799504857,0.431656799504857,0.431656799504857,0.431656799504857,0.431656799504857,0.53721014751026,1.255910529385664,1.740396201176563,1.740396201176563,1.740396201176563,0.4136825204327658,0.4136825204327658,0.4136825204327658,0.9989056158284531,0.1727652614307035,0.1727652614307035,0.8641343432289555,0.8641343432289555,1.249422127574866,1.657983235589752],[0,1.173345474058802,1.29378004417492,1.401424746191122,1.544375503983763,1.673816603698997,1.766512503958879,1.788079816861055,0,0,0,0.4054307940939748,0.7745850341414923,0,1.076937473785212,1.294894261917645,0,0,0.2228113561854757,0,1.374449548310666,0,0],[1.173345474058802,1.211588263353002,1.401424746191122,1.544375503983763,1.59162482287708,1.766512503958879,1.788079816861055,1.821878908224699,1.109625581911101,0.3045615720088103,0.4054307940939748,0.6923932533195745,0.8532937864581975,0.9947456929632946,1.294894261917645,1.807164145662032,0.5233431427856255,0.1406195753635579,0.9444393972838903,1.292257767488748,1.746450932067952,0.1822493396206509,0.4546551778004637],[1,1,1,1,1,1,1,2,2,2,1,1,2,1,1,2,2,1,2,1,2,2,2],[1.821878908224699,1.821878908224699,1.821878908224699,1.821878908224699,1.821878908224699,1.821878908224699,1.821878908224699,1.821878908224699,1.109625581911101,0.3045615720088103,0.8532937864581975,0.8532937864581975,0.8532937864581975,1.807164145662032,1.807164145662032,1.807164145662032,0.5233431427856255,0.9444393972838903,0.9444393972838903,1.746450932067952,1.746450932067952,0.1822493396206509,0.4546551778004637]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>x.V1<\/th>\n      <th>x.V2<\/th>\n      <th>zr<\/th>\n      <th>zc<\/th>\n      <th>start<\/th>\n      <th>stop<\/th>\n      <th>status<\/th>\n      <th>fu<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"x.V1","targets":2},{"name":"x.V2","targets":3},{"name":"zr","targets":4},{"name":"zc","targets":5},{"name":"start","targets":6},{"name":"stop","targets":7},{"name":"status","targets":8},{"name":"fu","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="the-simrecint-function">The <code>simrecint</code> function<a class="anchor" aria-label="anchor" href="#the-simrecint-function"></a>
</h2>
<div class="section level3">
<h3 class="unnumbered" id="description-2">Description<a class="anchor" aria-label="anchor" href="#description-2"></a>
</h3>
<p>With this function previously simulated data (for example simulated
by the use of <code>simrec</code> or <code>simreccomp</code>) can be cut
to an interim data set. The simulated data must be in patient time
(i.e. time since the patient entered the study, for an example see
below), and must be in the counting process format. Furthermore, the
dataset must have the variables <code>id</code>,
<code>start</code>,<code>stop</code>, and <code>status</code>, like data
simulated by the use of <code>simrec</code> or <code>simreccomp</code>.
Then for every individual additionally a recruitment time is generated
in study time (i.e. time since start of the study, for an example see
below), which is uniformly distributed on <span class="math inline">\([0, t_R]\)</span>. The timing of the interim
analysis <span class="math inline">\(t_I\)</span> is set in study time
and data are being cut to all data, that are available at the interim
analysis. If you only wish to simulate a recruitment time, <span class="math inline">\(t_I\)</span> can be set to <span class="math inline">\(t_R + fu.max\)</span> or something else beyond the
end of the study.</p>
<p>Simulated data in patient time:</p>
<p><img src="tikzout_1.png" width="600" style="display: block; margin: auto;"></p>
<p>Simulated data in study time with time of interim analysis (<span class="math inline">\(t_I\)</span>), end of recruitment period (<span class="math inline">\(t_R\)</span>) and end of study</p>
<p><img src="tikzout_2.png" width="600" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simrecint.html">simrecint</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">N</span>, <span class="va">tR</span>, <span class="va">tI</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 class="unnumbered" id="parameters-2">Parameters<a class="anchor" aria-label="anchor" href="#parameters-2"></a>
</h3>
<ul>
<li>
<code>data</code> Previously generated data (in patient time), that
shall be cut to interim data</li>
<li>
<code>N</code> Number of individuals, for which <code>data</code>
was generated</li>
<li>
<code>tR</code> Length of the recruitment period (in study
time)</li>
<li>
<code>tI</code> Timing of the interim analysis (in study time)</li>
</ul>
</div>
<div class="section level3">
<h3 class="unnumbered" id="output-2">Output<a class="anchor" aria-label="anchor" href="#output-2"></a>
</h3>
<p>The output is a <code>data.frame</code> consisting of the columns,
that were put into, and additionally the following columns:</p>
<ul>
<li>
<code>rectime</code> The recruitment time for each individual (in
study time).</li>
<li>
<code>interimtime</code> The time of the interim analysis
<code>tI</code> (in study time).</li>
<li>
<code>stop_study</code> The stopping time for each event in study
time.</li>
</ul>
<p>Individuals that are not already recruited at the interim analysis
are left out here.</p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="example-2">Example<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Example - see example for simrec</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/federicomarini/simrec" class="external-link">simrec</a></span><span class="op">)</span></span>
<span><span class="va">N</span>         <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">dist.x</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binomial"</span>, <span class="st">"normal"</span><span class="op">)</span></span>
<span><span class="va">par.x</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">beta.x</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">dist.z</span>    <span class="op">&lt;-</span> <span class="st">"gamma"</span></span>
<span><span class="va">par.z</span>     <span class="op">&lt;-</span> <span class="fl">0.25</span></span>
<span><span class="va">dist.rec</span>  <span class="op">&lt;-</span> <span class="st">"weibull"</span></span>
<span><span class="va">par.rec</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">fu.min</span>    <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">fu.max</span>    <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">cens.prob</span> <span class="op">&lt;-</span> <span class="fl">0.2</span></span>
<span></span>
<span><span class="va">simdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simrec.html">simrec</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">fu.min</span>, <span class="va">fu.max</span>, <span class="va">cens.prob</span>, <span class="va">dist.x</span>, <span class="va">par.x</span>, <span class="va">beta.x</span>, <span class="va">dist.z</span>,</span>
<span>                  <span class="va">par.z</span>, <span class="va">dist.rec</span>, <span class="va">par.rec</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Now simulate for each patient a recruitment time in [0,tR=2]</span></span>
<span><span class="co">### and cut data to the time of the interim analysis at tI=1:</span></span>
<span></span>
<span><span class="va">simdataint</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simrecint.html">simrecint</a></span><span class="op">(</span><span class="va">simdata</span>, N <span class="op">=</span> <span class="va">N</span>, tR <span class="op">=</span> <span class="fl">2</span>, tI <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">simdataint</span><span class="op">)</span>  <span class="co"># only run for small N!</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">simdataint</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    id x.V1         x.V2         z     start       stop status       fu    rectime</span></span>
<span><span class="co">## 14  3    0  0.008151753 1.5786595 0.0000000 0.66045333      1 2.000000 0.02996179</span></span>
<span><span class="co">## 15  3    0  0.008151753 1.5786595 0.6604533 0.95819727      1 2.000000 0.02996179</span></span>
<span><span class="co">## 16  3    0  0.008151753 1.5786595 0.9581973 0.97003821      0 2.000000 0.02996179</span></span>
<span><span class="co">## 22  4    1  0.155182291 2.2083037 0.0000000 0.08717326      0 2.000000 0.91282674</span></span>
<span><span class="co">## 43  6    1 -0.659325037 1.2332785 0.0000000 0.21196939      1 1.048874 0.20476520</span></span>
<span><span class="co">## 44  6    1 -0.659325037 1.2332785 0.2119694 0.79523480      0 1.048874 0.20476520</span></span>
<span><span class="co">## 60 10    0 -1.597374793 0.1893923 0.0000000 0.72396272      0 2.000000 0.27603728</span></span>
<span><span class="co">##    interimtime stop_study</span></span>
<span><span class="co">## 14           1  0.6904151</span></span>
<span><span class="co">## 15           1  0.9881591</span></span>
<span><span class="co">## 16           1  1.3764709</span></span>
<span><span class="co">## 22           1  1.7112427</span></span>
<span><span class="co">## 43           1  0.4167346</span></span>
<span><span class="co">## 44           1  1.0238257</span></span>
<span><span class="co">## 60           1  1.6896749</span></span></code></pre>
<div class="datatables html-widget html-fill-item" id="htmlwidget-9f866e0a8694c748ebdc" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9f866e0a8694c748ebdc">{"x":{"filter":"none","vertical":false,"data":[["14","15","16","22","43","44","60"],[3,3,3,4,6,6,10],[0,0,0,1,1,1,0],[0.008151752613948205,0.008151752613948205,0.008151752613948205,0.1551822912453139,-0.6593250373098182,-0.6593250373098182,-1.597374793342332],[1.578659455124134,1.578659455124134,1.578659455124134,2.20830369351287,1.233278457406121,1.233278457406121,0.1893922756683177],[0,0.6604533285116829,0.9581972682165976,0,0,0.211969389978741,0],[0.6604533285116829,0.9581972682165976,0.970038206782192,0.08717326214537024,0.211969389978741,0.7952347965911031,0.7239627214148641],[1,1,0,0,1,0,0],[2,2,2,2,1.048874071333557,1.048874071333557,2],[0.02996179321780801,0.02996179321780801,0.02996179321780801,0.9128267378546298,0.2047652034088969,0.2047652034088969,0.2760372785851359],[1,1,1,1,1,1,1],[0.6904151217294909,0.9881590614344056,1.376470934705083,1.711242739874708,0.4167345933876379,1.023825749093567,1.689674894350115]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>x.V1<\/th>\n      <th>x.V2<\/th>\n      <th>z<\/th>\n      <th>start<\/th>\n      <th>stop<\/th>\n      <th>status<\/th>\n      <th>fu<\/th>\n      <th>rectime<\/th>\n      <th>interimtime<\/th>\n      <th>stop_study<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"x.V1","targets":2},{"name":"x.V2","targets":3},{"name":"z","targets":4},{"name":"start","targets":5},{"name":"stop","targets":6},{"name":"status","targets":7},{"name":"fu","targets":8},{"name":"rectime","targets":9},{"name":"interimtime","targets":10},{"name":"stop_study","targets":11}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="plotting-the-data">Plotting the Data<a class="anchor" aria-label="anchor" href="#plotting-the-data"></a>
</h2>
<div class="section level3">
<h3 class="unnumbered" id="description-3">Description<a class="anchor" aria-label="anchor" href="#description-3"></a>
</h3>
<p>The functions <code>simrecPlot</code> and <code>simreccompPlot</code>
allow plotting of recurrent event data, possibly with a competing
event.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simrecPlot.html">simrecPlot</a></span><span class="op">(</span><span class="va">simdata</span>, id <span class="op">=</span> <span class="st">"id"</span>, start <span class="op">=</span> <span class="st">"start"</span>, stop <span class="op">=</span> <span class="st">"stop"</span>, status <span class="op">=</span> <span class="st">"status"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/simreccompPlot.html">simreccompPlot</a></span><span class="op">(</span><span class="va">simdata</span>, id <span class="op">=</span> <span class="st">"id"</span>, start <span class="op">=</span> <span class="st">"start"</span>, stop <span class="op">=</span> <span class="st">"stop"</span>, status <span class="op">=</span> <span class="st">"status"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 class="unnumbered" id="parameters-3">Parameters<a class="anchor" aria-label="anchor" href="#parameters-3"></a>
</h3>
<ul>
<li>
<code>data</code> A data set of recurrent event data to be plotted.
<br> The input-data must include columns corresponding to:
<ul>
<li>
<code>id</code> - patient-ID</li>
<li>
<code>start</code> - beginning of an interval where the patient is
at risk for an event</li>
<li>
<code>stop</code> -end of the interval due to an event or
censoring</li>
<li>
<code>status</code> - an indicator of the patient status at
<code>stop</code> with = 0 censoring, 1 = event for
<code>simrecPlot</code> and additionally 2 = competing event for
<code>simreccompPlot</code>
</li>
</ul>
</li>
<li>
<code>id</code> the name of the id column, default is
<code>"id"</code>
</li>
<li>
<code>start</code> the name of the start column, default is
<code>"start"</code>
</li>
<li>
<code>stop</code> the name of the stop column, default is
<code>"stop"</code>
</li>
<li>
<code>status</code> the name of the status column, default is
<code>"status"</code>
</li>
</ul>
</div>
<div class="section level3">
<h3 class="unnumbered" id="output-3">Output<a class="anchor" aria-label="anchor" href="#output-3"></a>
</h3>
<p>The output is a plot of the data with a bullet (<span class="math inline">\(\bullet\)</span>) indicating a recurrent event, a
circle (<span class="math inline">\(\circ\)</span>) indicating censoring
and <span class="math inline">\(\times\)</span> indicating the competing
event.</p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="example-3">Example<a class="anchor" aria-label="anchor" href="#example-3"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simrecPlot.html">simrecPlot</a></span><span class="op">(</span><span class="va">simdata</span><span class="op">)</span></span></code></pre></div>
<p><img src="simrec-vignette_files/figure-html/ExamplePlot-1.png" width="576" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simreccompPlot.html">simreccompPlot</a></span><span class="op">(</span><span class="va">simdata1</span><span class="op">)</span></span></code></pre></div>
<p><img src="simrec-vignette_files/figure-html/ExamplePlot-2.png" width="576" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-info">Session Info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.3.3 (2024-02-29)</span></span>
<span><span class="co">## Platform: x86_64-apple-darwin20 (64-bit)</span></span>
<span><span class="co">## Running under: macOS Monterey 12.7.3</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRblas.0.dylib </span></span>
<span><span class="co">## LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: internal</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] simrec_1.0.1 knitr_1.45  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] vctrs_0.6.5       cli_3.6.2         rlang_1.1.3       xfun_0.43        </span></span>
<span><span class="co">##  [5] highr_0.10        purrr_1.0.2       textshaping_0.3.7 jsonlite_1.8.8   </span></span>
<span><span class="co">##  [9] DT_0.32           htmltools_0.5.8   ragg_1.3.0        sass_0.4.9       </span></span>
<span><span class="co">## [13] rmarkdown_2.26    crosstalk_1.2.1   evaluate_0.23     jquerylib_0.1.4  </span></span>
<span><span class="co">## [17] fastmap_1.1.1     yaml_2.3.8        lifecycle_1.0.4   memoise_2.0.1    </span></span>
<span><span class="co">## [21] compiler_4.3.3    fs_1.6.3          htmlwidgets_1.6.4 systemfonts_1.0.6</span></span>
<span><span class="co">## [25] digest_0.6.35     R6_2.5.1          magrittr_2.0.3    bslib_0.6.2      </span></span>
<span><span class="co">## [29] tools_4.3.3       pkgdown_2.0.7     cachem_1.0.8      desc_1.4.3</span></span></code></pre>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Andersen1982" class="csl-entry">
Andersen, P. K., and R. D. Gill. 1982. <span>“Cox’s Regression Model for
Counting Processes: A Large Sample Study.”</span> <em>Ann. Statist.</em>
10 (4): 1100–1120. <a href="https://doi.org/10.1214/aos/1176345976" class="external-link">https://doi.org/10.1214/aos/1176345976</a>.
</div>
<div id="ref-Bender2005" class="csl-entry">
Bender, Ralf, Thomas Augustin, and Maria Blettner. 2005.
<span>“Generating Survival Times to Simulate Cox Proportional Hazards
Models.”</span> <em>Statistics in Medicine</em> 24 (11): 1713–23. <a href="https://doi.org/10.1002/sim.2059" class="external-link">https://doi.org/10.1002/sim.2059</a>.
</div>
<div id="ref-Jahn-Eimermacher2015" class="csl-entry">
Jahn-Eimermacher, Antje, Katharina Ingel, Ann-Kathrin Ozga, Stella
Preussler, and Harald Binder. 2015. <span>“Simulating Recurrent Event
Data with Hazard Functions Defined on a Total Time Scale.”</span>
<em>BMC Medical Research Methodology</em> 15 (1): 16. <a href="https://doi.org/10.1186/s12874-015-0005-2" class="external-link">https://doi.org/10.1186/s12874-015-0005-2</a>.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p><a href="mailto:ingel@uni-mainz.de" class="email">ingel@uni-mainz.de</a>; currently at BIOTRONIK SE &amp;
Co. KG<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>currently at Institute of Medical Biometry and
Informatics (IMBI, Heidelberg)<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="mailto:marinif@uni-mainz.de" class="email">marinif@uni-mainz.de</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>currently at University of Applied Sciences Darmstadt,
<a href="mailto:antje.jahn@h-da.de" class="email">antje.jahn@h-da.de</a><a href="#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Katharina Ingel, Antje Jahn-Eimermacher, Stella Preussler, <a href="https://federicomarini.github.io" class="external-link">Federico Marini</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
